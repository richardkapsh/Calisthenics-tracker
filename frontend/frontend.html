<!DOCTYPE html>
<html>
<head>
    <title>Calisthenics Tracker</title>
</head>
<body>
    <h1>Calisthenics Tracker</h1>

    <h3>Add Progress</h3>
    User ID: <input id="userId"><br>
    Exercise: <input id="exercise"><br>
    Weight: <input id="weight"><br>
    Reps: <input id="reps"><br>
    <button onclick="addProgress()">Add</button>

    <h3>View Progress</h3>
    User ID: <input id="viewUserId">
    <button onclick="viewProgress()">View</button>

    <pre id="output" style="border:1px solid #ccc; padding:10px; width:400px; height:200px; overflow:auto;"></pre>


<script>
const API_BASE_URL = "http://127.0.0.1:5000";

// ADD PROGRESS
async function addProgress() {
    const userId = document.getElementById("userId").value;
    const exercise = document.getElementById("exercise").value;
    const weight = parseInt(document.getElementById("weight").value) || null;
    const reps = parseInt(document.getElementById("reps").value) || null;

    const res = await fetch(`${API_BASE_URL}/progress?userId=${userId}`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            exercise: exercise,
            weight: weight,
            reps: reps
        })
    });

    alert("Added entry!");
}

// VIEW PROGRESS
async function viewProgress() {
    const userId = document.getElementById("viewUserId").value;

    const res = await fetch(`${API_BASE_URL}/progress?userId=${userId}`);
    const items = await res.json();

    document.getElementById("output").textContent =
        JSON.stringify(items, null, 2);
}
</script>

</body>
</html>
